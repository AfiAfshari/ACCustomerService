@using AcCustomerService.ViewModel;
@using Kendo.Mvc.UI;
@using Kendo.Mvc.Extensions;
@model ACCustomerServiceViewModel

@{
    ViewBag.Title = "AC Customer Service";
}

<div>
    <div id="recordSection">
        <div id="CustomerServiceGrid"></div>

        <button type="button" id="nextButton" class="btn btn-primary">Add Cusotmer</button>
    </div>

    @*@(Html.Kendo().Grid<ACCustomerServiceViewModel>()
            .Name("CustomerServiceGrid")
            .DataSource(dataSource => dataSource
                .Ajax()
                .Model(model => model.Id(p => p.CustomerID))
                .Read(read => read.Action("GetACCustomerService", "ACCustomerService"))
                .PageSize(20)
                .ServerOperation(false)
             )
            .Columns(columns =>
            {
                columns.Bound(p => p.CustomerID).Hidden();
                columns.Bound(p => p.FirstName).Title("First Name").Width(50);
                columns.Bound(p => p.LastName).Title("Last Name").Width(50);
                columns.Bound(p => p.Address).Title("Address").Width(150);
                columns.Bound(p => p.PhoneNumber).Title("Phone Number").Width(50);
                columns.Bound(p => p.DateCalled).Title("Date Called").Width(100);
                columns.Bound(p => p.DateCreated).Hidden();
            })
            .Pageable(page => page.Enabled(true))
        )*@
<div id="formSection" style="display:none">

    @using (Html.BeginForm("ACCustomerService", "ACCustomerService", FormMethod.Post))
    {
        <div class="form-group">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                @Html.Label("First Name", new { @class = "control-label mandatory-star" })
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                @Html.TextBoxFor(m => m.FirstName, new { @class = "form-control" })
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                <label id="lblFirstName" class="field-validation-error" style="display:none">This Field is requierd </label>
            </div>
        </div>
        <div class="form-group">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                @Html.Label("Last Name", new { @class = "control-label mandatory-star" })
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                @Html.TextBoxFor(m => m.LastName, new { @class = "form-control" })
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                <label id="lblLastName" class="field-validation-error" style="display:none">This Field is requierd </label>
            </div>
        </div>
        <div class="form-group">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                @Html.Label("Address", new { @class = "control-label mandatory-star" })
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                @Html.TextBoxFor(m => m.Address, new { @class = "form-control" })
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                <label id="lblAddress" class="field-validation-error" style="display:none">This Field is requierd </label>
            </div>
        </div>
        <div class="form-group">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                @Html.Label("Phone Number", new { @class = "control-label mandatory-star" })
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                @Html.TextBoxFor(m => m.PhoneNumber, new { @class = "form-control" })
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                <label id="lblPhoneNumber" class="field-validation-error" style="display:none">This Field is requierd </label>
            </div>
        </div>
        <div class="form-group">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                @Html.Label("Date Called", new { @class = "control-label" })
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                @(Html.Kendo().DatePickerFor(m => m.DateCalled)
          .Name("DateCalled")
          .HtmlAttributes(new { @style="auto" })
        )<br />

            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p-lr-5">
                <label id="lblDateCalled" class="field-validation-error" style="display:none">This Field is requierd </label>
            </div>
        </div>


        @*<label for="fname">First name:</label><br>*@

        @*<input class="form-control" type="text" id="fname" name="fname"><br>*@
        @*<label for="lname">Last Name:</label><br>*@

        @*<input class="form-control" type="text" id="lname" name="lname" /><br>*@
        @*<label for="address">Address:</label><br>*@

        @*<input class="form-control" type="text" id="address" name="address"><br>*@
        @*<label for="pnumber">Phone Number:</label><br>*@

        @*<input class="form-control" type="text" id="pnumber" name="pnumber"><br>*@
        @*<label for="dcalled">Date Called:</label><br>*@
        

        @*<input class="form-control" type="text" id="dcalled" name="pnumber"><br>*@
        <button type="button" id="backButton" class="btn btn-inverse">Back</button>

        <button type="submit" class="btn btn-primary" onclick="return validateForm()">Save Cusotmer</button>
        @*<input type="submit" value="save">*@
    }
</div>


</div>

<script>
    function validateForm() {
        debugger;
        var firstName = document.getElementById('FirstName').value,
            lastName = document.getElementById('LastName').value,
            address = document.getElementById('Address').value,
            phoneNumber = document.getElementById('PhoneNumber').value,
            dateCalled = document.getElementById('DateCalled').value;

        var count = 0;

        if (firstName == "") {
            $('#lblFirstName').show(),
            count++;
        }
        else
            $('#lblFirstName').hide();
        if (lastName == "") {
            $('#lblFLastName').show(),
                count++;
        }
        else
            $('#lblLastName').hide();
        if (address == "") {
            $('#lblAddress').show(),
                count++;
        }
        else
            $('#lblAddress').hide();
        if (phoneNumber == "") {
            $('#lblPhoneNumber').show(),
                count++;
        }
        else
            $('#lblPhoneNumber').hide();
        if (dateCalled == "") {
            $('#lblDateCalled').show(),
                count++;
        }
        else
            $('#lblDateCalled').hide();
        

        return count > 0 ? false : true;


    }


    $(function () {

        $.ajax({
            type: "GET",
            url: "/ACCustomerService/GetACCustomerService",
            dataType: "json",
            success: function (results) {
                $("#CustomerServiceGrid").empty()
                if (results.length > 0) {
                    $("#CustomerServiceGrid").kendoGrid({
                        dataSource: {
                            data: results,
                            schema: {
                                model: {
                                    fields: {
                                        CustomerID: { type: "number" },
                                        FirstName: { type: "string" },
                                        LastName: { type: "string" },
                                        Address: { type: "string" },
                                        PhoneNumber: { type: "string" },
                                        DateCalled: { type: "string" },
                                        DateCreated: { type: "string" }
                                    }
                                }
                            },
                            pageSize: 10
                        },
                        scrollable: true,
                        sortable: true,
                        filterable: true,
                        pageable: {
                            input: true,
                            numeric: false
                        },
                        columns: [
                            { field: "CustomerID", hidden: true },
                            { field: "FirstName", title: "First Name", width: "130px" },
                            { field: "LastName", title: "Last Name", width: "130px" },
                            { field: "Address", title: "Address", width: "130px" },
                            { field: "PhoneNumber", title: "Phone Number", width: "130px" },
                            { field: "DateCalled", title: "Date Called", width: "130px", template: "#= kendo.toString(kendo.parseDate(DateCalled), 'MM/dd/yyyy') #" },
                            { field: "DateCreated", hidden: true }
                        ]
                    });
                }
            }
        });

        $('#nextButton').on("click", function () {
            $('#recordSection').hide();
            $('#formSection').show();
        });

        $('#backButton').on("click", function () {
            $('#recordSection').show();
            $('#formSection').hide();
        });
    });

</script>


